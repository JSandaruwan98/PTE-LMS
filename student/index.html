<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="css/style_for_mycourse_dropdown.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/custome.css">

    <script>
      $(document).ready(function () {
      $('#addEmployee').click(function(){
           $('#main').load('employeeAdd.html');
      });
      $('#dashboard').click(function(){
           $('#main').load('dashboard.html');  
      });
      $('#wallet').click(function(){
           $('#main').load('wallet.html');
      });
      $('#studentView').click(function(){
           $('#main').load('studentView.html');
      });
      $('#studentAttendance').click(function(){
           $('#main').load('studentAttendance.html');
      });
      $('#assTest').click(function(){
           $('#main').load('assignTest.html');
      });
      $('#assVideo').click(function(){
           $('#main').load('assignVideo.html');
      });
      $('#pendingEvaluation').click(function(){
           $('#main').load('evaluationPending.html');
      });
      $('#evaluationHistory').click(function(){
           $('#main').load('evaluationHistory.html');
      });
      $('#employeeView').click(function(){
           $('#main').load('employeeView.html');
      });
      $('#employeeAttendance').click(function(){
           $('#main').load('employeeAttendance.html');
      });
      $('#type_of_question_1').click(function(){
           $('#sub-main').load('practiceExamBoard.html');
      });
      $('#type_of_question_2').click(function(){
           $('#sub-main').load('practiceExamBoard.html');
      });
      $('#type_of_question_3').click(function(){
           $('#sub-main').load('practiceExamBoard.html');
      });
      $('#type_of_question_4').click(function(){
           $('#sub-main').load('practiceExamBoard.html');
      });
      $('#type_of_question_5').click(function(){
           $('#sub-main').load('practiceExamBoard.html');
      });
      });
    </script>
    <script>
      $(document).ready(function () {
          
          $('.dropdown').click(function () {
              const $submenu = $(this).find('.submenu');

              $submenu.slideToggle();
  
              $('.dropdown').not(this).find('.submenu').slideUp();

               event.stopPropagation();
          });

          $('.submenu').click(function (event) {
              event.stopPropagation();
          });
      });
  </script>
 
</head>
<body style="cursor: context-menu;" id="main-content">
  <nav id="main-navbar" class="navbar1 fixed-top" style="position: fixed;">
    <a id="toggle-btn" href="javascript:void(0);" onclick="" class="link-dark">
        <img class="logo_icon" src="images/LMS_icon.png" />
        <div href="" class="logo_name text-decoration-none"><span>PTE EXAM LMS</span></div>
        <div href="" class="logo_name text-decoration-none" style="margin-left: 200px;"><span>Home</span></div>
        <div class="dropdown-ptepractice logo_name text-decoration-none" style="margin-left: 300px;">
          <div class="dropbtn-ptepractice">PTE Practice</div>
              <!-- The dropdown content -->
              <div class="dropdown-content-ptepractice">
                  <div class="row">
                      <div class="col">
                        <h2>Read Aloud</h2>
                        <ul id="examList">
                          <li><a id="type_of_question_1" href="#type=1">Read Aloud <span style="color: red; font-size: 10px;">Ai Score</span></a></li>
                          <li><a id="type_of_question_2" href="#type=2">Repeat Sentence <span style="color: red; font-size: 10px;">Ai Score<span></a></li>
                          <li><a id="type_of_question_3" href="#type=3">Describe Image <span style="color: red; font-size: 10px;">Ai Score<span></a></li>
                          <li><a id="type_of_question_4" href="#type=4">Re-tell Lecture <span style="color: red; font-size: 10px;">Ai Score<span></a></li>
                          <li><a id="type_of_question_5" href="#type=5">Answer Short Question <span style="color: red; font-size: 10px;">Ai Score<span></a></li>
                        </ul>
                      </div>
                      <div class="col">
                        <h2>Writing</h2>
                        <ul>
                          <li>Summarize Writing Test <span style="color: red; font-size: 10px;">Ai Score<span></li>
                          <li>Write Essay <span style="color: red; font-size: 10px;">Ai Score<span></li>
                        </ul>
                      </div>
                      <div class="col">
                        <h2>Reading</h2>
                        <ul>
                          <li>Reading and Writing: Fill in the blanks</li>
                          <li>Multiple Choice(Multiple) </li>
                          <li>Re-order Paragraphs</li>
                          <li>Reading: Fill in the Blanks</li>
                          <li>Multiple Choice (Single)</li>
                        </ul>
                      </div>
                      <div class="col">
                        <h2>Listening</h2>
                        <ul>
                          <li>Summarize Spoken Text <span style="color: red; font-size: 10px;">Ai Score<span></span></li>
                          <li>Multiple Choice(Multiple)</li>
                          <li>Highlight Correct Summary</li>
                          <li>Multiple Choice(Single)</li>
                          <li>Select Missing Word</li>
                          <li>Highlight Incorrect Words</li>
                          <li>Write Form Dictation</li>
                        </ul>
                      </div>
                      <div class="col">
                        <h2>More</h2>
                        <ul>
                          <li>Vocab</li>
                          <li>Shadowing</li>
                          <li>AI Score Report Analysis</li>
                          <li>AI Study Plan</li>
                          <li>Mock Exam</li>
                          <li>Study Materials Download</li>
                        </ul>
                      </div>
                      
                  </div>
              </div>
        </div>
        <div href="" class="logo_name text-decoration-none" style="margin-left: 450px;"><span>Course</span></div>
        <div href="" class="logo_name text-decoration-none" style="margin-left: 550px;"><span>Circle</span></div>
        <div href="" class="logo_name text-decoration-none" style="margin-left: 650px;"><span>APP</span></div>



        <div class="profile-dropdown-box m-4 me-4" style="float: right;">
          <img src="images/profile-user.png" alt="Profile Icon" class="icon" style="width: 30px; height: 30px;">
          <div class="dropdown-content-profile" style="right: 0; ">
              <label>Profile <span style="margin-left: 35px;">Admin</span></label>
              <a href="#" onclick="logoutUser()" style="text-align: center; background-color: rgba(244, 227, 227, 1);"><b>Logout</b></a>
          </div>
        </div>
        
        <a type="button" id="button-show-simple" class="position-relative mt-4 cl" style="float: right;">
          <img src="images/notification.png" alt="Profile Icon" class="icon" style="width: 30px; height: 30px; float: right;">
         
        </a>
        <div id="notificationContainer" class="cla" style="right: 100px; top: 50px; margin-left: 100px;">
          <div id="notifyArea"></div>
      </div>

    </a>
  </nav>

  <div class="profile-div">
    <ul class="menu">
      <li class="menu-item">
        <a href="#" class="text-decoration-none mt-2"><img class="icon me-4" src="images/student.png" />Kamal</a>
      </li>
    </ul>
    
  
  </div>
 
  <div class="sidebar">
    <ul class="menu">
      <li class="menu-item">
        <a id="dashboard" href="#" class="text-decoration-none mt-2"><img class="icon me-4" src="images/dashboard.png" />Dashboard</a>
      </li>
      <li class="menu-item">
        <a href="#" id="addEmployee" class="text-decoration-none"><img class="icon me-4" src="images/Admin.png" />Admin</a>
      </li>
    </ul>
    
  
  </div>
  <div id="main">
    <h1></h1>
  </div>
  <div id="sub-main" class="mx-4" style="margin-top: 80px;">
    <h1></h1>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
        const toggleBtn = $("#toggle-btn");
        const sidebar = $(".sidebar");

        toggleBtn.click(function() {
            sidebar.toggleClass("open");
        });
    });
  </script>
  <script>
    $(document).ready(function () {
        // Add click event handling using jQuery
        $('.text-decoration-none').click(function () {
            // Remove 'clicked' class from all list items
            $('.text-decoration-none').removeClass('clicked');

            // Add 'clicked' class to the clicked list item
            $(this).addClass('clicked');
        });
    });
</script>
<script>
  document.querySelector('.icon').addEventListener('click', function() {
    var dropdown = document.querySelector('.dropdown-content-profile');
    if (dropdown.style.display === 'none' || dropdown.style.display === '') {
        dropdown.style.display = 'block';
    } else {
        dropdown.style.display = 'none';
    }
  });

  function logout() {
    // Add logout functionality here, such as redirecting to a logout endpoint or clearing session data.
    alert('Logout button clicked!');
  }

 </script>

<script>
      let timeout;

      function checkLoginStatus() {
            $.ajax({
                type: "GET",
                url: "dataHandler/api/get.php?data_type=check_login", // Create this PHP file
                success: function (data) {
                    if (data === "success") {
                        // User is logged in, do nothing
                    } else {
                        window.location.href = "login.html"; // Redirect to the login page
                    }
                }
            });
        }

        // Event listener to check login status on page load
        $(document).ready(function () {
            checkLoginStatus();
        });



      // Function to reset the timer
      function resetTimeout() {
          clearTimeout(timeout);
          timeout = setTimeout(function () {
              logoutUser();
          }, 30* 60* 1000 ); // 30 minute (30 * 60 * 1000 milliseconds)
      }

      // Function to initiate logout
      function logoutUser() {
          $.ajax({
              type: "GET",
              url: "dataHandler/api/get.php?data_type=logout",
              success: function (data) {
                    if (data === "success") {
                        window.location.href = "login.html"; // Redirect to the login page
                    } else {
                        alert("Logout failed.");
                    }
                }
          });
      }

      // Event listener to reset the timer on user activity
      $(document).on('click mousemove', function () {
          resetTimeout();
      });

      // Initial timer start
      resetTimeout();

      // Click event for the logout button
      $("#logoutButton").click(function () {
          logoutUser();
      });
</script>
<script>
  var notificationsVisible = false;
  
  $(document).ready(function () {
      notifyCount = $('#button-show-simple')
      function notification_count(count){
          var htmlToInsertNotificationCount = `
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              +${count}
                    <span class="visually-hidden">unread messages</span>
            </span>
              `;

          var count = $(htmlToInsertNotificationCount);
          notifyCount.append(count);
      }


      $.ajax({
            type: 'GET',
            url: 'dataHandler/api/get.php?data_type=notification',
            dataType: "json",
            success: function(data){
              console.log(data.length);
              var dataLength = data.length;
              notification_count(dataLength);  
            }
      })
    })

    $(document).on("click", "#button-show-simple", function() {
      
      var notifyArea = $('#notifyArea');
      
      function insertAlert(message, type, id) {
          console.log(id)
          var htmlToInsert = `
              <div class="alert alert-primary" role="alert" style = "margin-bottom: 5px; max-width: 550px;">
                <button type="button" data-id=${id}  class="close" data-dismiss="alert" aria-label="Close" style = "margin-left: 15px">
                  <span aria-hidden="true">&times;</span>
                </button>
                <b>${type}</b>  -  ${message}
              </div>
          `;

          
          var newAlert = $(htmlToInsert);
          newAlert.hide();
          notifyArea.append(newAlert);
          newAlert.fadeIn(500); // Fade in the new notification
      }
      

      if (notificationsVisible) {
          // Hide and remove existing notifications
          notifyArea.children().fadeOut(500, function() {
              $(this).remove();
          });
          notificationsVisible = false;
      } else {
          $.ajax({
            type: 'GET',
            url: 'dataHandler/api/get.php?data_type=notification',
            dataType: "json",
            success: function(data){
              console.log(data.length)
              var dataLength = data.length
              $.each(data, function(index, item){
                console.log(item.id);
                insertAlert(item.message, item.type, item.id);
              })
            }
          })
          notificationsVisible = true;
      }
    });

  $(document).on("click", ".close", function() {
    notifyCount = $('#button-show-simple')
    function notification_count(count){
      var htmlToInsertNotificationCount = `
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
          +${count}
          <span class="visually-hidden">unread messages</span>
        </span>
        `;

      var count = $(htmlToInsertNotificationCount);
      notifyCount.append(count);
    }
    var id = $(this).data('id');
    $(this).parent().fadeOut(500, function() {
      console.log(id)
      $(this).remove();
      $.ajax({
        type: "POST",
        url: "dataHandler/api/post.php", // Replace with the URL of your PHP script
        data: { itemId: id, task: 'removeNotification' },
        success: function(response) {
          console.log("Test " + testId + " removed");
        },
      })
      $.ajax({
            type: 'GET',
            url: 'dataHandler/api/get.php?data_type=notification',
            dataType: "json",
            success: function(data){
              console.log(data.length);
              var dataLength = data.length;
              notification_count(dataLength);  
            }
      })
    });
  });
</script>

<!--PTE Practice exam drop down menu jquery function-->
<script>
  $(document).ready(function(){
      $(".dropbtn-ptepractice").click(function(){
          $(".dropdown-content-ptepractice").toggle();
      });

      // Close the dropdown if the user clicks outside of it
      $(document).on("click", function(event){
          if(!$(event.target).closest(".dropdown-ptepractice").length){
              $(".dropdown-content-ptepractice").hide();
          }
      });

      $("#examList").click(function(){
          $(".dropdown-content-ptepractice").hide();
      });
  });
</script>
<script>
  
</script>

</body>
</html>